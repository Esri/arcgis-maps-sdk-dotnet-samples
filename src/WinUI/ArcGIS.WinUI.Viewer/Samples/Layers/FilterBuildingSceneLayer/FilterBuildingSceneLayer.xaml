<UserControl
    x:Class="ArcGIS.WinUI.Samples.FilterBuildingSceneLayer.FilterBuildingSceneLayer"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:esriUI="using:Esri.ArcGISRuntime.UI.Controls">
    <UserControl.Resources>
        <Style x:Key="HeaderTextStyle" TargetType="TextBlock">
            <Setter Property="FontWeight" Value="SemiBold" />
            <Setter Property="Margin" Value="0,0,0,5" />
        </Style>
    </UserControl.Resources>

    <Grid>
        <!--  LocalSceneView displays the 3D building scene.  -->
        <esriUI:LocalSceneView x:Name="MySceneView" />

        <!--  Settings panel for floor filtering and category visibility controls.  -->
        <Border
            Width="300"
            Margin="12"
            HorizontalAlignment="Right"
            VerticalAlignment="Top"
            Style="{StaticResource BorderStyle}">
            <ScrollViewer VerticalScrollBarVisibility="Auto">
                <StackPanel Margin="10">
                    <TextBlock
                        Margin="0,0,0,15"
                        FontSize="18"
                        FontWeight="Bold"
                        Text="Scene Settings" />

                    <!--  Floor selection dropdown.  -->
                    <TextBlock Style="{StaticResource HeaderTextStyle}" Text="Floor:" />
                    <ComboBox
                        x:Name="FloorComboBox"
                        Margin="0,0,0,15"
                        SelectionChanged="FloorComboBox_SelectionChanged" />

                    <!--  Category tree for toggling sublayer visibility.  -->
                    <TextBlock
                        Margin="0,0,0,10"
                        Style="{StaticResource HeaderTextStyle}"
                        Text="Categories:" />
                    <TreeView x:Name="CategoriesTreeView" MaxHeight="400">
                        <TreeView.ItemTemplate>
                            <DataTemplate>
                                <ContentPresenter Content="{Binding Content}" />
                            </DataTemplate>
                        </TreeView.ItemTemplate>
                    </TreeView>

                    <!--  Selected feature section.  -->
                    <TextBlock
                        Margin="0,15,0,5"
                        Style="{StaticResource HeaderTextStyle}"
                        Text="Selected Feature:" />

                    <!--  Feature attributes panel, shown when a feature is selected.  -->
                    <Border
                        x:Name="FeatureInfoBorder"
                        MinHeight="100"
                        MaxHeight="200"
                        Padding="10"
                        BorderBrush="LightGray"
                        BorderThickness="1"
                        Visibility="Collapsed">
                        <Grid>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto" />
                                <RowDefinition Height="*" />
                            </Grid.RowDefinitions>
                            <!--  Close button to clear selection.  -->
                            <Button
                                x:Name="CloseSelectedFeatureButton"
                                Grid.Row="0"
                                Height="28"
                                HorizontalAlignment="Right"
                                Click="CloseSelectedFeatureButton_Click"
                                Content="Close"
                                ToolTipService.ToolTip="Clear selection" />
                            <!--  Scrollable list of feature attributes.  -->
                            <ScrollViewer Grid.Row="1" VerticalScrollBarVisibility="Auto">
                                <ItemsControl x:Name="FeatureAttributesPanel">
                                    <ItemsControl.ItemTemplate>
                                        <DataTemplate>
                                            <StackPanel Margin="0,2">
                                                <TextBlock
                                                    FontWeight="SemiBold"
                                                    Text="{Binding Key}"
                                                    TextWrapping="Wrap" />
                                                <TextBlock
                                                    Margin="10,0,0,0"
                                                    Foreground="Gray"
                                                    Text="{Binding Value}"
                                                    TextWrapping="Wrap" />
                                            </StackPanel>
                                        </DataTemplate>
                                    </ItemsControl.ItemTemplate>
                                </ItemsControl>
                            </ScrollViewer>
                        </Grid>
                    </Border>

                    <!--  Instruction text shown when no feature is selected.  -->
                    <TextBlock
                        x:Name="NoFeatureSelectedText"
                        FontStyle="Italic"
                        Foreground="Gray"
                        Text="Click on a building feature to view its attributes."
                        TextWrapping="Wrap" />
                </StackPanel>
            </ScrollViewer>
        </Border>
    </Grid>
</UserControl>